<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RepurposeAI - Turn one content into many</title>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Marked.js for Markdown Rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Tailwind Typography Plugin (via CDN) -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <script>
        // Prevent FOUC: Hide layout immediately
        document.documentElement.classList.add('app-loading');

        // Check onboarding status
        if (!localStorage.getItem('rep_onboarding_seen')) {
            document.documentElement.classList.add('onboarding-pending');
        }
    </script>
    <style>
        /* Initial Loading State & Onboarding State */
        .app-loading #layout-sidebar,
        .app-loading #app-main-layout,
        .onboarding-pending #layout-sidebar,
        .onboarding-pending #app-main-layout {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }

        /* Show content when loaded (override) */
        html:not(.app-loading):not(.onboarding-pending) #layout-sidebar,
        html:not(.app-loading):not(.onboarding-pending) #app-main-layout {
            visibility: visible;
            opacity: 1;
        }

        /* Override visibility for the modal so it appears even if parent is hidden */
        .onboarding-pending #onboarding-modal {
            visibility: visible;
        }
    </style>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
</head>
<body class="bg-gray-100 dark:bg-dark-bg text-gray-900 dark:text-gray-100 min-h-screen flex flex-col antialiased selection:bg-brand selection:text-white transition-colors duration-300">

    <!-- Mobile Overlay -->
    <!-- Layout Components Placeholders -->
    <div id="layout-sidebar"></div>

    <!-- Main Content Wrapper -->
    <div id="app-main-layout" class="md:ml-64 min-h-screen flex flex-col">
        <!-- Header Placeholder -->
        <div id="layout-header"></div>

        <!-- Main Content -->
        <main class="flex-grow w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-12">
            


            <!-- Home View -->
            <div id="view-home" class="view-section hidden">
                <!-- Welcome Section -->
                <div class="mb-10 bg-gradient-to-br from-brand to-brand-dark p-8 md:p-12 rounded-[2.5rem] text-white shadow-xl shadow-brand/20 relative overflow-hidden">
                    <div class="relative z-10 max-w-2xl">
                        <h2 class="text-3xl md:text-4xl font-black mb-4 leading-tight">Í∞ÄÏû• ÏôÑÎ≤ΩÌïú ÏΩòÌÖêÏ∏†<br>Ïû¨Í∞ÄÍ≥µÏùò ÏãúÏûë üöÄ</h2>
                        <p class="text-brand-light/90 text-lg md:text-xl font-medium mb-8 leading-relaxed">
                            Î∏îÎ°úÍ∑∏, Îâ¥Ïä§Î†àÌÑ∞Î•º ÌÑ∞Ïπò Î™á Î≤àÏúºÎ°ú <br class="hidden sm:block">
                            SNS ÏµúÏ†ÅÌôî ÏΩòÌÖêÏ∏†Î°ú Î≥ÄÌôòÌïòÏÑ∏Ïöî.
                        </p>
                        <div class="flex flex-wrap gap-4">
                            <a href="#create" class="bg-white text-brand px-6 py-3.5 rounded-2xl font-bold flex items-center gap-2 hover:bg-gray-50 transition-all shadow-lg hover:translate-y-[-2px]">
                                <i data-lucide="plus-circle" class="w-5 h-5"></i>
                                ÏÉàÎ°úÏö¥ ÏΩòÌÖêÏ∏† ÎßåÎì§Í∏∞
                            </a>
                        </div>
                    </div>
                    <!-- Decorative element -->
                    <div class="absolute -right-20 -bottom-20 w-80 h-80 bg-white/10 rounded-full blur-3xl"></div>
                    <div class="absolute right-10 top-10 opacity-20 transform rotate-12">
                        <i data-lucide="sparkles" class="w-32 h-32"></i>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                    <i data-lucide="bar-chart-2" class="w-5 h-5 text-brand"></i>
                    Ï†ÑÏ≤¥ ÏÑ±Í≥º Î¶¨Ìè¨Ìä∏
                </h3>

                <!-- Stats Overview -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-white dark:bg-dark-card p-5 rounded-2xl border border-gray-200 dark:border-dark-border shadow-sm">
                        <p class="text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1">Ï¥ù ÏÉùÏÑ± ÏΩòÌÖêÏ∏†</p>
                        <p class="text-2xl font-black text-gray-900 dark:text-white" id="stat-total-count">0</p>
                    </div>
                    <div class="bg-white dark:bg-dark-card p-5 rounded-2xl border border-gray-200 dark:border-dark-border shadow-sm">
                        <p class="text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1">ÌèâÍ∑† Î∞îÏù¥Îü¥ Ï†êÏàò</p>
                        <p class="text-2xl font-black text-brand" id="stat-avg-score">0</p>
                    </div>
                    <div class="bg-white dark:bg-dark-card p-5 rounded-2xl border border-gray-200 dark:border-dark-border shadow-sm">
                        <p class="text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1">Ïù∏Í∏∞ ÌîåÎû´Ìèº</p>
                        <p class="text-2xl font-black text-gray-900 dark:text-white" id="stat-top-platform">-</p>
                    </div>
                    <div class="bg-white dark:bg-dark-card p-5 rounded-2xl border border-gray-200 dark:border-dark-border shadow-sm">
                        <p class="text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1">Ïù¥Î≤à Ï£º ÏÉùÏÑ±</p>
                        <p class="text-2xl font-black text-gray-900 dark:text-white" id="stat-week-count">0</p>
                    </div>
                </div>
            </div>

            <!-- Dashboard View (History) -->
            <div id="view-dashboard" class="view-section hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl font-black text-gray-900 dark:text-white flex items-center gap-3">
                            <i data-lucide="history" class="w-8 h-8 text-brand"></i>
                            ÏÉùÏÑ± Í∏∞Î°ù
                        </h2>
                        <p class="text-gray-500 dark:text-gray-400 mt-2 pl-1 font-medium">ÏßÄÍ∏àÍπåÏßÄ ÎßåÎì† ÏΩòÌÖêÏ∏†Ïùò ÌûàÏä§ÌÜ†Î¶¨Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.</p>
                    </div>
                </div>

                <!-- Recent Activity Section -->
                <div class="space-y-6">
                    <!-- History List Container -->
                    <div id="history-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    
                    <!-- Empty State -->
                    <div id="history-empty-state" class="hidden flex flex-col items-center justify-center bg-white dark:bg-dark-card rounded-2xl border border-dashed border-gray-300 dark:border-dark-border p-12 text-center text-gray-500 dark:text-gray-400 col-span-full">
                        <div class="w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
                            <i data-lucide="history" class="w-8 h-8 opacity-50"></i>
                        </div>
                        <p class="text-lg font-medium text-gray-900 dark:text-gray-200">ÏÉùÏÑ±Îêú Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§</p>
                        <p class="text-sm mt-1 mb-6">Ï≤´ Î≤àÏß∏ ÏΩòÌÖêÏ∏†Î•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</p>
                        <a href="#create" class="bg-brand hover:bg-brand-dark text-white font-bold px-6 py-3 rounded-xl transition-all shadow-lg shadow-brand/20 flex items-center gap-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            ÏΩòÌÖêÏ∏† ÏÉùÏÑ±ÌïòÍ∏∞
                        </a>
                    </div>
                </div>
            </div>

            <!-- Create View (Generator) -->
            <div id="view-create" class="view-section">
                <div class="max-w-6xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 h-full">
                        
                        <!-- Left Column: Input Canvas (7 cols) -->
                        <div class="lg:col-span-7 space-y-6">
                            <div class="flex items-center justify-between">
                                <h2 class="text-xl font-bold flex items-center gap-3 text-gray-900 dark:text-white">
                                    <span class="step-badge w-8 h-8 rounded-xl flex items-center justify-center text-sm font-black text-brand shrink-0">1</span>
                                    ÏõêÎ≥∏ ÏΩòÌÖêÏ∏† ÏûÖÏàò
                                </h2>
                                <div class="flex items-center gap-2">
                                    <div class="relative">
                                        <button id="load-history-btn" class="text-xs font-bold text-brand bg-brand/10 px-3 py-1.5 rounded-lg hover:bg-brand hover:text-white transition-all flex items-center gap-1.5">
                                            <i data-lucide="history" class="w-3.5 h-3.5"></i> ÏµúÍ∑º Í∏∞Î°ù Î∂àÎü¨Ïò§Í∏∞
                                        </button>
                                        <!-- History Dropdown -->
                                        <div id="history-dropdown" class="absolute right-0 mt-2 w-72 bg-white dark:bg-dark-card rounded-2xl shadow-2xl border border-gray-100 dark:border-dark-border py-2 hidden z-[9999] animate-fade-in-up">
                                            <div class="px-4 py-2 border-b border-gray-50 dark:border-dark-border">
                                                <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">ÏµúÍ∑º ÏûÖÎ†• Í∏∞Î°ù</span>
                                            </div>
                                            <div id="history-dropdown-list" class="max-h-64 overflow-y-auto">
                                                <!-- Items populated via JS -->
                                            </div>
                                        </div>
                                    </div>
                                    <button onclick="document.getElementById('input-text').value = ''" class="text-xs font-medium text-gray-400 hover:text-red-500 transition-colors flex items-center gap-1 px-2 py-1.5">
                                        <i data-lucide="trash-2" class="w-3.5 h-3.5"></i> Ï¥àÍ∏∞Ìôî
                                    </button>
                                </div>
                            </div>

                        <div class="relative group">
                            <textarea 
                                id="input-text"
                                class="creation-canvas w-full h-[400px] lg:h-[600px] p-6 rounded-2xl bg-white dark:bg-dark-card/30 text-gray-900 dark:text-gray-100 focus:outline-none transition-all resize-none text-lg leading-relaxed placeholder-gray-300 dark:placeholder-gray-700 appearance-none border border-transparent focus:border-brand/30"
                                placeholder="Î∏îÎ°úÍ∑∏ Í∏Ä, Îâ¥Ïä§Î†àÌÑ∞, ÌåüÏ∫êÏä§Ìä∏ ÎåÄÎ≥∏ Îì±ÏùÑ Ïó¨Í∏∞Ïóê ÎßàÏùåÍªè Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî..."
                            ></textarea>
                            
                            <!-- Canvas Decoration -->
                            <div class="absolute top-4 right-4 flex gap-2 opacity-0 group-focus-within:opacity-100 transition-opacity pointer-events-none">
                                <div class="px-2 py-1 rounded bg-brand/10 text-brand text-[10px] font-bold tracking-widest uppercase">AI Canvas Ready</div>
                            </div>
                        </div>
                        <div id="character-count" class="hidden"></div>
                    </div> <!-- End Left Column -->

                    <!-- Right Column: Settings & Actions (5 cols) -->
                    <div class="lg:col-span-5 space-y-6">
                        <div class="flex items-center gap-3">
                            <h2 class="text-xl font-bold flex items-center gap-3 text-gray-900 dark:text-white">
                                <span class="step-badge w-8 h-8 rounded-xl flex items-center justify-center text-sm font-black text-brand shrink-0">2</span>
                                ÏΩòÌÖêÏ∏† Ïª§Ïä§ÌÑ∞ÎßàÏù¥Ïßï
                            </h2>
                        </div>
                        
                        <div class="bg-white dark:bg-dark-card/50 rounded-3xl p-6 border border-gray-100 dark:border-white/5 space-y-8">
                            <!-- Platform Sections -->
                            <!-- Section: Text Platforms -->
                            <div class="space-y-4">
                                <div class="flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest pl-1">
                                    <i data-lucide="type" class="w-3 h-3"></i> ÌÖçÏä§Ìä∏ ÏΩòÌÖêÏ∏† (Text Content)
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="twitter" class="absolute opacity-0" checked>
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-sky-500/10 text-sky-500 flex items-center justify-center">
                                                    <i data-lucide="twitter" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">X (Twitter)</span>
                                            </div>
                                        </div>
                                    </label>

                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="linkedin" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-blue-600/10 text-blue-600 flex items-center justify-center">
                                                    <i data-lucide="linkedin" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">LinkedIn</span>
                                            </div>
                                        </div>
                                    </label>

                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="naver_blog" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-emerald-500/10 text-emerald-500 flex items-center justify-center">
                                                    <i data-lucide="layout" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">Naver Blog</span>
                                            </div>
                                        </div>
                                    </label>

                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="instagram_feed" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-pink-500/10 text-pink-500 flex items-center justify-center">
                                                    <i data-lucide="instagram" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">Instagram</span>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- Section: Video Platforms -->
                            <div class="space-y-4 pt-6 border-t border-gray-100 dark:border-white/5">
                                <div class="flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest pl-1">
                                    <i data-lucide="video" class="w-3 h-3"></i> ÎπÑÎîîÏò§ ÏΩòÌÖêÏ∏† (Video Content)
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="youtube_shorts" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-red-600/10 text-red-600 flex items-center justify-center">
                                                    <i data-lucide="play" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">YouTube Shorts</span>
                                            </div>
                                        </div>
                                    </label>

                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="instagram_reels" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-pink-600/10 text-pink-600 flex items-center justify-center">
                                                    <i data-lucide="instagram" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">Instagram Reels</span>
                                            </div>
                                        </div>
                                    </label>

                                    <label class="platform-card cursor-pointer group">
                                        <input type="checkbox" name="platform" value="tiktok" class="absolute opacity-0">
                                        <div class="p-4 rounded-2xl border-2 border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-white/5 transition-all group-hover:border-brand/30">
                                            <div class="flex flex-col items-center gap-2 text-center">
                                                <div class="w-10 h-10 rounded-xl bg-gray-900/10 dark:bg-white/10 text-gray-900 dark:text-white flex items-center justify-center">
                                                    <i data-lucide="music" class="w-5 h-5"></i>
                                                </div>
                                                <span class="text-xs font-bold text-gray-700 dark:text-gray-300">TikTok Scripts</span>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <!-- Section: Customization -->
                            <div class="space-y-6 pt-6 border-t border-gray-100 dark:border-white/5">
                                <div class="flex items-center gap-2 text-xs font-bold text-gray-400 uppercase tracking-widest pl-1">
                                    <i data-lucide="sliders-horizontal" class="w-3 h-3"></i> ÎßûÏ∂§ ÏÑ§Ï†ï (Customization)
                                </div>
                                
                                <div class="space-y-4">
                                    <!-- Brand Selector -->
                                    <div class="space-y-2">
                                        <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Î∏åÎûúÎìú ÌîÑÎ°úÌïÑ (Brand Profile)</label>
                                        <div class="relative">
                                            <select id="brand-select" class="w-full h-12 rounded-xl bg-gray-50 border border-gray-200 dark:bg-white/5 dark:border-white/10 pl-11 pr-4 text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-brand/50 outline-none transition-all appearance-none">
                                                <option value="">Î∂àÎü¨Ïò§Îäî Ï§ë...</option>
                                            </select>
                                            <i data-lucide="briefcase" class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
                                            <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
                                        </div>
                                    </div>



                                    <!-- Language Selector -->
                                    <div class="space-y-2">
                                        <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Ïñ∏Ïñ¥</label>
                                        <select id="language-select" class="w-full h-12 rounded-xl bg-gray-50 border border-gray-200 dark:bg-white/5 dark:border-white/10 px-4 text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-brand/50 outline-none transition-all">
                                            <option value="Korean" selected>üá∞üá∑ ÌïúÍµ≠Ïñ¥ (Korean)</option>
                                            <option value="English">üá∫üá∏ ÏòÅÏñ¥ (English)</option>
                                            <option value="Japanese">üáØüáµ ÏùºÎ≥∏Ïñ¥ (Japanese)</option>
                                            <option value="Chinese">üá®üá≥ Ï§ëÍµ≠Ïñ¥ (Chinese)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Area -->
                            <div class="pt-6">
                                <button id="generate-btn" class="magical-button w-full h-16 rounded-2xl text-white font-black text-lg shadow-2xl shadow-brand/20 flex items-center justify-center gap-3 disabled:opacity-50 disabled:grayscale transition-all overflow-hidden group">
                                    <i data-lucide="sparkles" class="w-6 h-6 group-hover:rotate-12 transition-transform"></i>
                                    <span>AI ÏΩòÌÖêÏ∏† ÏÉùÏÑ±ÌïòÍ∏∞</span>
                                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                                </button>
                                <p class="text-center text-xs text-gray-400 mt-3">
                                    Powered by Advanced AI Models ‚Ä¢ 1 Credit per generation
                                </p>
                            </div>



                            <!-- (Cleaned up old button) -->
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>




            <!-- Brands View -->
            <div id="view-brands" class="view-section hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
                    <div>
                        <h2 class="text-3xl font-black text-gray-900 dark:text-white flex items-center gap-3">
                            <i data-lucide="briefcase" class="w-8 h-8 text-brand"></i>
                            Î∏åÎûúÎìú ÌîÑÎ°úÌïÑ
                        </h2>
                        <p class="text-gray-500 dark:text-gray-400 mt-2 pl-1 font-medium">ÎÇòÎßåÏùò Î∏åÎûúÎìú Î≥¥Ïù¥Ïä§ÏôÄ Ïä§ÌÉÄÏùºÏùÑ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî.</p>
                    </div>
                    <button id="create-brand-btn" class="group relative px-6 py-3 rounded-2xl bg-white dark:bg-dark-card border-2 border-brand/20 hover:border-brand text-brand font-bold shadow-lg shadow-brand/10 hover:shadow-brand/20 transition-all flex items-center gap-2 overflow-hidden">
                        <div class="absolute inset-0 bg-brand/5 group-hover:bg-brand/10 transition-colors"></div>
                        <i data-lucide="plus" class="w-5 h-5 relative z-10 group-hover:scale-110 transition-transform"></i>
                        <span class="relative z-10">ÏÉà Î∏åÎûúÎìú Ï∂îÍ∞Ä</span>
                    </button>
                </div>

                <!-- Brand List -->
                <div id="brands-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>

                <!-- Brand Empty State -->
                <div id="brands-empty-state" class="hidden flex flex-col items-center justify-center bg-white dark:bg-dark-card rounded-2xl border border-dashed border-gray-300 dark:border-dark-border p-12 text-center text-gray-500 dark:text-gray-400 col-span-full">
                     <div class="w-16 h-16 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4">
                        <i data-lucide="briefcase" class="w-8 h-8 opacity-50"></i>
                    </div>
                    <p class="text-lg font-medium text-gray-900 dark:text-gray-200">Îì±Î°ùÎêú Î∏åÎûúÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§</p>
                    <p class="text-sm mt-1">ÏûêÏ£º ÏÇ¨Ïö©ÌïòÎäî Î∏åÎûúÎìú Ïä§ÌÉÄÏùºÏùÑ Ï†ÄÏû•Ìï¥Î≥¥ÏÑ∏Ïöî.</p>
                </div>


            </div>

            <!-- Settings View -->
            <div id="view-settings" class="view-section hidden">
                <div class="max-w-4xl mx-auto space-y-8 animate-fade-in-up">
                    
                    <!-- Header -->
                    <div class="text-center mb-10">
                        <div class="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4 shadowed-icon">
                            <i data-lucide="settings-2" class="w-8 h-8 text-gray-600 dark:text-gray-300"></i>
                        </div>
                        <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-2 tracking-tight">ÌôòÍ≤Ω ÏÑ§Ï†ï</h2>
                        <p class="text-gray-500 dark:text-gray-400">AI Î™®Îç∏ Î∞è Ïï± ÏÇ¨Ïö© ÌôòÍ≤ΩÏùÑ ÏÑ§Ï†ïÌïòÏÑ∏Ïöî.</p>
                    </div>

                    <!-- Main Settings Grid -->
                    <div class="bg-white dark:bg-dark-card rounded-3xl shadow-xl border border-gray-100 dark:border-dark-border p-8 space-y-8">
                        
                        <!-- AI Service Section -->
                        <div class="space-y-6">
                            <h3 class="text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2">
                                <i data-lucide="cpu" class="w-5 h-5 text-brand"></i>
                                AI Î™®Îç∏ ÏÑ†ÌÉù
                            </h3>

                            <!-- Model Selection Grid -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Gemini Card -->
                                <label class="relative cursor-pointer group">
                                    <input type="radio" name="ai-provider" value="gemini" class="peer sr-only" checked>
                                    <div class="p-5 rounded-2xl border-2 border-gray-100 dark:border-dark-border hover:border-blue-300 peer-checked:border-blue-500 peer-checked:bg-blue-50/30 dark:peer-checked:bg-blue-900/10 transition-all h-full shadow-sm hover:shadow-md peer-checked:shadow-none">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/40 dark:to-blue-800/20 flex items-center justify-center">
                                                <!-- Google Gemini Logo (Star) -->
                                                <svg viewBox="0 0 24 24" class="w-6 h-6" xmlns="http://www.w3.org/2000/svg">
                                                    <defs>
                                                        <linearGradient id="gemini-gradient-v2" x1="0%" y1="0%" x2="100%" y2="100%">
                                                            <stop offset="0%" stop-color="#4E87F3"/>
                                                            <stop offset="50%" stop-color="#9A69D2"/>
                                                            <stop offset="100%" stop-color="#EF5C5C"/>
                                                        </linearGradient>
                                                    </defs>
                                                    <path d="M12 0C12 6.627 6.627 12 0 12C6.627 12 12 17.373 12 24C12 17.373 17.373 12 24 12C17.373 12 12 6.627 12 0Z" fill="url(#gemini-gradient-v2)"/>
                                                </svg>
                                            </div>
                                            <!-- Custom Radio with Blue Check -->
                                            <div class="w-5 h-5 rounded-full border-2 border-gray-300 peer-checked:border-blue-500 peer-checked:bg-blue-500 transition-colors relative flex items-center justify-center">
                                                <div class="w-2 h-2 bg-white rounded-full opacity-0 peer-checked:opacity-100 transition-opacity"></div>
                                            </div>
                                        </div>
                                        <h4 class="font-bold text-gray-900 dark:text-white mb-1 group-hover:text-blue-600 peer-checked:text-blue-700 dark:peer-checked:text-blue-400 transition-colors">Google Gemini</h4>
                                        <span class="inline-block px-2 py-0.5 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full mb-2">Fast & Smart</span>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                                            Íµ¨Í∏ÄÏùò ÏµúÏã† Í≥†ÏÑ±Îä• Î™®Îç∏. Îπ†Î•¥Í≥† Ï†ïÌôïÌïú ÌïúÍµ≠Ïñ¥ Ï≤òÎ¶¨Ïóê Í∞ïÏ†êÏù¥ ÏûàÏäµÎãàÎã§. (Î¨¥Î£å ÏÇ¨Ïö©Îüâ Ï†úÍ≥µ)
                                        </p>
                                    </div>
                                </label>

                                <!-- OpenAI Card -->
                                <label class="relative cursor-pointer group">
                                    <input type="radio" name="ai-provider" value="openai" class="peer sr-only">
                                    <div class="p-5 rounded-2xl border-2 border-gray-100 dark:border-dark-border hover:border-gray-400 peer-checked:border-gray-900 dark:peer-checked:border-white peer-checked:bg-gray-50/50 dark:peer-checked:bg-white/5 transition-all h-full shadow-sm hover:shadow-md peer-checked:shadow-none">
                                        <div class="flex items-center justify-between mb-3">
                                            <div class="w-10 h-10 rounded-xl bg-gray-100 dark:bg-white/10 flex items-center justify-center text-gray-900 dark:text-white">
                                                <!-- OpenAI Logo (Image) -->
                                                <img src="assets/openai_logo.png" alt="OpenAI Logo" class="w-6 h-6 object-contain dark:invert opacity-90">
                                            </div>
                                            <!-- Custom Radio with Black Check -->
                                            <div class="w-5 h-5 rounded-full border-2 border-gray-300 peer-checked:border-gray-900 dark:peer-checked:border-white peer-checked:bg-gray-900 dark:peer-checked:bg-white transition-colors relative flex items-center justify-center">
                                                <div class="w-2 h-2 bg-white dark:bg-black rounded-full opacity-0 peer-checked:opacity-100 transition-opacity"></div>
                                            </div>
                                        </div>
                                        <h4 class="font-bold text-gray-900 dark:text-white mb-1 group-hover:text-gray-700 peer-checked:text-black dark:peer-checked:text-white transition-colors">OpenAI GPT-4o</h4>
                                        <span class="inline-block px-2 py-0.5 bg-gray-100 text-gray-700 text-[10px] font-bold rounded-full mb-2">Powerful</span>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                                            Í∞ÄÏû• Í∞ïÎ†•Ìïú Ï∂îÎ°† Îä•Î†•. Î≥µÏû°Ìïú ÎâòÏïôÏä§ ÌååÏïÖÍ≥º Ï∞ΩÏùòÏ†ÅÏù∏ Í∏ÄÏì∞Í∏∞Ïóê ÌÉÅÏõîÌï©ÎãàÎã§.
                                        </p>
                                    </div>
                                </label>
                            </div>

                            <!-- Settings Detail Section (Dynamic) -->
                            <div id="provider-settings-container" class="mt-4 p-1">
                                
                                <!-- Gemini Settings -->
                                <div id="gemini-settings" class="provider-settings space-y-4">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                            Gemini API Key
                                            <span class="ml-2 text-[10px] text-brand bg-brand/10 px-2 py-0.5 rounded-full">Recommended</span>
                                        </label>
                                        <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-xs text-brand hover:underline flex items-center gap-1 font-medium">
                                            ÌÇ§ Î∞úÍ∏âÎ∞õÍ∏∞ <i data-lucide="external-link" class="w-3 h-3"></i>
                                        </a>
                                    </div>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <i data-lucide="key" class="w-4 h-4 text-gray-400"></i>
                                        </div>
                                        <input type="password" id="gemini-api-key" class="w-full pl-10 pr-32 py-3 bg-gray-50 dark:bg-dark-element border border-gray-200 dark:border-dark-border rounded-xl focus:ring-2 focus:ring-brand focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-sm" placeholder="AIzaSy...">
                                        <div class="absolute inset-y-0 right-2 flex items-center gap-1">
                                            <button id="delete-gemini-key-btn" class="text-gray-400 hover:text-red-500 text-[10px] font-medium px-2 py-1.5 rounded-lg transition-colors">
                                                ÏÇ≠Ï†ú
                                            </button>
                                            <button id="save-gemini-key-btn" class="bg-brand hover:bg-brand-dark text-white text-xs font-medium px-3 py-1.5 rounded-lg transition-colors shadow-sm">
                                                Ï†ÄÏû•
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mt-4 p-4 bg-gray-50 dark:bg-dark-element rounded-xl border border-gray-100 dark:border-dark-border">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-2">
                                                <div id="api-status-indicator" class="w-2 h-2 rounded-full bg-gray-300"></div>
                                                <span id="api-status-text" class="text-[10px] text-gray-500 font-medium uppercase tracking-wider">ÏÉÅÌÉú ÎØ∏ÌôïÏù∏</span>
                                            </div>
                                            <button id="validate-api-key-btn" class="text-xs font-bold text-brand hover:text-brand-dark transition-colors flex items-center gap-1">
                                                <i data-lucide="shield-check" class="w-3 h-3"></i>
                                                ÌÇ§ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                                            </button>
                                        </div>
                                        <p id="api-validation-msg" class="text-[10px] text-gray-400 mt-2 hidden">API ÌÇ§Î•º ÌôïÏù∏ Ï§ëÏûÖÎãàÎã§...</p>
                                    </div>
                                </div>

                                <!-- OpenAI Settings -->
                                <div id="openai-settings" class="provider-settings space-y-4 hidden">
                                    <div class="flex items-center justify-between mb-2">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
                                            OpenAI API Key
                                        </label>
                                        <a href="https://platform.openai.com/api-keys" target="_blank" class="text-xs text-brand hover:underline flex items-center gap-1 font-medium">
                                            ÌÇ§ Î∞úÍ∏âÎ∞õÍ∏∞ <i data-lucide="external-link" class="w-3 h-3"></i>
                                        </a>
                                    </div>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <i data-lucide="key" class="w-4 h-4 text-gray-400"></i>
                                        </div>
                                        <input type="password" id="openai-api-key" class="w-full pl-10 pr-32 py-3 bg-gray-50 dark:bg-dark-element border border-gray-200 dark:border-dark-border rounded-xl focus:ring-2 focus:ring-brand focus:border-transparent outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-sm" placeholder="sk-...">
                                        <div class="absolute inset-y-0 right-2 flex items-center gap-1">
                                            <button id="delete-openai-key-btn" class="text-gray-400 hover:text-red-500 text-[10px] font-medium px-2 py-1.5 rounded-lg transition-colors">
                                                ÏÇ≠Ï†ú
                                            </button>
                                            <button id="save-openai-key-btn" class="bg-brand hover:bg-brand-dark text-white text-xs font-medium px-3 py-1.5 rounded-lg transition-colors">
                                                Ï†ÄÏû•
                                            </button>
                                        </div>
                                    </div>
                                    <p class="text-[10px] text-red-500/80 font-medium">
                                        ‚ö†Ô∏è Ï†àÎåÄ Í≥µÏú†ÌïòÏßÄ ÎßàÏÑ∏Ïöî. Ïù¥ ÌÇ§Îäî ÎãπÏã†Ïùò OpenAI Í≥ÑÏ†ï ÎπÑÏö©Ïóê ÏßÅÏ†ë Ïó∞Í≤∞Îê©ÎãàÎã§.
                                    </p>
                                    <div class="mt-4 p-4 bg-gray-50 dark:bg-dark-element rounded-xl border border-gray-100 dark:border-dark-border">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap-2">
                                                <div id="openai-status-indicator" class="w-2 h-2 rounded-full bg-gray-300"></div>
                                                <span id="openai-status-text" class="text-[10px] text-gray-500 font-medium uppercase tracking-wider">ÏÉÅÌÉú ÎØ∏ÌôïÏù∏</span>
                                            </div>
                                            <button id="validate-openai-key-btn" class="text-xs font-bold text-brand hover:text-brand-dark transition-colors flex items-center gap-1">
                                                <i data-lucide="shield-check" class="w-3 h-3"></i>
                                                ÌÇ§ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
                                            </button>
                                        </div>
                                        <div id="openai-error-container" class="mt-3 hidden">
                                            <p id="openai-error-msg" class="text-[10px] text-red-500 mb-1"></p>
                                            <a id="openai-dashboard-link" href="#" target="_blank" class="text-[10px] text-brand hover:underline font-bold flex items-center gap-1">
                                                OpenAI ÎåÄÏãúÎ≥¥ÎìúÏóêÏÑú Ìï¥Í≤∞ÌïòÍ∏∞ <i data-lucide="external-link" class="w-3 h-3"></i>
                                            </a>
                                        </div>
                                        <p id="openai-validation-msg" class="text-[10px] text-gray-400 mt-2 hidden">API ÌÇ§Î•º ÌôïÏù∏ Ï§ëÏûÖÎãàÎã§...</p>
                                    </div>
                                </div>
                            </div>

                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-4">
                                * API ÌÇ§Îäî Î∏åÎùºÏö∞Ï†Ä ÎÇ¥Î∂Ä(Local Storage)Ïóê ÏïîÌò∏ÌôîÎêòÏñ¥ ÏïàÏ†ÑÌïòÍ≤å Ï†ÄÏû•Îê©ÎãàÎã§.<br>
                                * Gemini ÌÇ§Î•º ÏûÖÎ†•ÌïòÏßÄ ÏïäÏúºÎ©¥ Í∏∞Î≥∏ Ï†úÍ≥µ ÌÇ§Í∞Ä ÏÇ¨Ïö©Îê©ÎãàÎã§.
                            </p>
                        </div>
                        
                        <div class="border-t border-gray-100 dark:border-dark-border my-6"></div>

                        <!-- Data Management Section -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white pb-2 flex items-center gap-2">
                                <i data-lucide="database" class="w-5 h-5 text-brand"></i>
                                Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨
                            </h3>
                            <button id="clear-history-btn" class="w-full flex items-center justify-center gap-2 px-4 py-3 border border-red-200 text-red-500 hover:bg-red-50 hover:text-red-700 dark:border-red-900/30 dark:hover:bg-red-900/10 rounded-xl transition-colors font-medium">
                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                                <span>Î™®Îì† ÏÉùÏÑ± Í∏∞Î°ù ÏÇ≠Ï†ú</span>
                            </button>

                            <button id="reset-onboarding-btn" class="w-full flex items-center justify-center gap-2 px-4 py-3 border border-brand text-brand hover:bg-brand hover:text-white rounded-xl transition-colors font-medium">
                                <i data-lucide="help-circle" class="w-5 h-5"></i>
                                <span>ÌäúÌÜ†Î¶¨Ïñº Îã§Ïãú Î≥¥Í∏∞ (Ïò®Î≥¥Îî© Î¶¨ÏÖã)</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Brand Editor Modal (Inline) -->
            <div id="brand-editor-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-md hidden opacity-0 transition-opacity duration-300">
                <div class="bg-white dark:bg-dark-card w-full max-w-2xl rounded-3xl shadow-2xl m-4 relative animate-fade-in transform scale-95 transition-all duration-300 max-h-[90vh] overflow-hidden flex flex-col border border-white/20 dark:border-white/5">
                    
                    <!-- Premium Header -->
                    <div class="px-8 py-6 bg-gradient-to-r from-gray-50 to-white dark:from-white/5 dark:to-transparent border-b border-gray-100 dark:border-white/5 flex items-center justify-between sticky top-0 z-10">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-brand to-brand-dark flex items-center justify-center shadow-lg shadow-brand/20 text-white">
                                <i data-lucide="briefcase" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h3 id="brand-editor-title" class="text-2xl font-black text-gray-900 dark:text-white tracking-tight">ÏÉà Î∏åÎûúÎìú ÌîÑÎ°úÌïÑ</h3>
                                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">ÎÇòÎßåÏùò Í≥†Ïú†Ìïú Î≥¥Ïù¥Ïä§ÏôÄ Ïä§ÌÉÄÏùºÏùÑ Ï†ïÏùòÌïòÏÑ∏Ïöî</p>
                            </div>
                        </div>
                        <button id="close-brand-modal-btn" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>

                    <!-- Scrollable Content -->
                    <div class="p-8 overflow-y-auto custom-scrollbar space-y-8">
                        
                        <!-- Section 1: Core Identity -->
                        <div class="space-y-4">
                            <h4 class="text-xs font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                                <i data-lucide="fingerprint" class="w-3 h-3"></i> ÌïµÏã¨ Ï†ïÏ≤¥ÏÑ± (Core Identity)
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Brand Name -->
                                <div class="space-y-2 group">
                                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                        Î∏åÎûúÎìú Ïù¥Î¶Ñ <span class="text-red-500">*</span>
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                            <i data-lucide="tag" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                        </div>
                                        <input type="text" id="brand-name" placeholder="Ïòà: Î¶¨ÌçºÌçºÏä§AI" class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white font-medium">
                                    </div>
                                </div>

                                <!-- Brand Tone -->
                                <div class="space-y-2 group">
                                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                        ÌÜ§Ïï§Îß§ÎÑà (Tone) <span class="text-red-500">*</span>
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                            <i data-lucide="mic-2" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                        </div>
                                        <input type="text" id="brand-tone" placeholder="Ïòà: Ï†ÑÎ¨∏Ï†ÅÏù∏, ÏúÑÌä∏ÏûàÎäî, ÏπúÍ∑ºÌïú" class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white font-medium">
                                    </div>
                                </div>

                                <!-- Target Audience -->
                                <div class="space-y-2 group col-span-full md:col-span-2">
                                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                        ÌÉÄÍ≤ü Ïò§ÎîîÏñ∏Ïä§ (Target Audience)
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                            <i data-lucide="users" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                        </div>
                                        <input type="text" id="brand-target" placeholder="Ïòà: 2030 ÏßÅÏû•Ïù∏, ÌÖåÌÅ¨ Îß§ÎãàÏïÑ, Ï£ºÎ∂Ä" class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white font-medium">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Implementation Guidelines -->
                        <div class="space-y-4">
                            <h4 class="text-xs font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                                <i data-lucide="sliders" class="w-3 h-3"></i> Ï†ÅÏö© Í∞ÄÏù¥Îìú (Implementation Guide)
                            </h4>
                            
                            <!-- Style Rules -->
                            <div class="space-y-2 group">
                                <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                    ÏûëÎ¨∏ Ïä§ÌÉÄÏùº (Style Constraints)
                                </label>
                                <div class="relative">
                                    <div class="absolute top-3.5 left-3.5 flex items-start pointer-events-none">
                                        <i data-lucide="pen-tool" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                    </div>
                                    <textarea id="brand-style" rows="2" placeholder="Ïòà: Ïù¥Î™®ÏßÄ ÏÇ¨Ïö© ÏûêÏ†ú, Îä•ÎèôÌÉú ÏúÑÏ£º, ÎëêÍ¥ÑÏãù ÏûëÏÑ±." class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all resize-none placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white leading-relaxed"></textarea>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Keywords -->
                                <div class="space-y-2 group">
                                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                        ÏÑ†Ìò∏ ÌÇ§ÏõåÎìú (Keywords)
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                            <i data-lucide="hash" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                        </div>
                                        <input type="text" id="brand-keywords" placeholder="Ïòà: #AI, ÌòÅÏã†" class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white">
                                    </div>
                                </div>

                                <!-- Forbidden -->
                                <div class="space-y-2 group">
                                    <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-red-500 transition-colors">
                                        Í∏àÏßÄ Îã®Ïñ¥ (Forbidden)
                                    </label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none">
                                            <i data-lucide="ban" class="w-4 h-4 text-gray-400 group-focus-within:text-red-500 transition-colors"></i>
                                        </div>
                                        <input type="text" id="brand-forbidden" placeholder="Ïòà: Ï†ÄÎ†¥Ìïú, ÌÄµÌîΩÏä§" class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50 outline-none transition-all placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: AI Training -->
                        <div class="space-y-4">
                            <h4 class="text-xs font-black text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                                <i data-lucide="brain-circuit" class="w-3 h-3"></i> AI Ìä∏Î†àÏù¥Îãù Îç∞Ïù¥ÌÑ∞
                            </h4>
                            <div class="space-y-2 group">
                                <label class="text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-1.5 group-focus-within:text-brand transition-colors">
                                    ÏòàÏãú Î¨∏Ïû• (Example Sentences)
                                    <span class="text-[10px] font-normal text-brand bg-brand/10 px-2 py-0.5 rounded-full">Ï†ïÌôïÎèÑ Ìñ•ÏÉÅ</span>
                                </label>
                                <div class="relative">
                                    <div class="absolute top-3.5 left-3.5 flex items-start pointer-events-none">
                                        <i data-lucide="quote" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                                    </div>
                                    <textarea id="brand-examples" rows="3" placeholder="Î∏åÎûúÎìú Î≥¥Ïù¥Ïä§Î•º Í∞ÄÏû• Ïûò ÎÇòÌÉÄÎÇ¥Îäî ÏòàÏãú Î¨∏Ïû•ÏùÑ 2~3Í∞ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî." class="w-full pl-10 pr-4 py-3 bg-gray-50/50 dark:bg-black/20 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-brand focus:border-brand/50 outline-none transition-all resize-none placeholder-gray-400 dark:placeholder-gray-600 text-gray-900 dark:text-white leading-relaxed"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Test & Verify -->
                        <div class="pt-2">
                            <button onclick="testBrandVoice()" id="test-brand-btn" class="w-full py-3 bg-gray-100 dark:bg-white/5 hover:bg-gray-200 dark:hover:bg-white/10 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2 group">
                                <i data-lucide="play-circle" class="w-4 h-4 group-hover:text-brand transition-colors"></i>
                                Î≥¥Ïù¥Ïä§ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÉùÏÑ±
                            </button>
                            <div id="brand-test-result" class="hidden mt-4 bg-gradient-to-br from-blue-50/50 to-indigo-50/50 dark:from-blue-900/10 dark:to-indigo-900/10 border border-blue-100 dark:border-blue-500/20 rounded-xl p-5 relative overflow-hidden">
                                <p class="text-[10px] uppercase tracking-wider font-extrabold text-brand mb-2 flex items-center gap-1">
                                    <i data-lucide="sparkles" class="w-3 h-3"></i> AI ÎØ∏Î¶¨Î≥¥Í∏∞
                                </p>
                                <div id="brand-test-content" class="text-sm text-gray-700 dark:text-gray-200 leading-relaxed font-medium"></div>
                            </div>
                        </div>

                    </div>

                    <!-- Footer Actions -->
                    <div class="px-8 py-5 border-t border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-black/20 flex gap-4">
                        <button id="cancel-brand-btn" class="flex-1 py-3.5 rounded-xl border-2 border-transparent hover:bg-gray-200/50 dark:hover:bg-white/10 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white font-bold transition-all">
                            Ï∑®ÏÜå
                        </button>
                        <button id="save-brand-btn" class="flex-[2] py-3.5 rounded-xl bg-brand text-white font-bold text-lg shadow-lg hover:shadow-brand/30 hover:bg-brand/90 hover:-translate-y-0.5 active:scale-[0.98] transition-all flex items-center justify-center gap-2 group">
                            <i data-lucide="save" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                            Î∏åÎûúÎìú ÌîÑÎ°úÌïÑ Ï†ÄÏû•
                        </button>
                    </div>
                </div>
            </div>

            <!-- Onboarding Modal -->
            <div id="onboarding-modal" class="fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm hidden opacity-0 transition-opacity duration-300">
                <div class="bg-white dark:bg-dark-card border border-brand/10 p-0 rounded-3xl shadow-2xl max-w-lg w-[95%] relative transform scale-95 transition-all duration-300 overflow-hidden" id="onboarding-content">
                    
                    <!-- Decorative Header -->
                    <div class="bg-gradient-to-br from-brand/5 to-purple-500/5 dark:from-brand/20 dark:to-purple-900/20 p-8 pb-6 border-b border-gray-100 dark:border-dark-border/50">
                         <div class="w-14 h-14 bg-white dark:bg-dark-bg rounded-2xl flex items-center justify-center mb-4 shadow-sm border border-brand/10 mx-auto">
                            <i data-lucide="sparkles" class="w-7 h-7 text-brand fill-brand/10"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white text-center mb-2">RepurposeAI ÏãúÏûëÌïòÍ∏∞</h2>
                        <p class="text-gray-500 dark:text-gray-400 text-sm text-center leading-relaxed">
                            ÏΩòÌÖêÏ∏† Ïû¨Í∞ÄÍ≥µÏùÑ ÏúÑÌïú Í∞ÄÏû• Ïä§ÎßàÌä∏Ìïú Î∞©Î≤ï.<br>
                            Îã® ÏÑ∏ Îã®Í≥ÑÎßåÏúºÎ°ú Ï†ÑÎ¨∏Í∞Ä ÏàòÏ§ÄÏùò ÏÜåÏÖú ÏΩòÌÖêÏ∏†Î•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî.
                        </p>
                    </div>

                    <div class="p-8 pt-6">
                        <!-- Steps Container -->
                        <div class="space-y-0 mb-8 relative">
                            <!-- Vertical Line -->
                            <div class="absolute left-4 top-4 bottom-4 w-0.5 bg-gray-100 dark:bg-gray-800 -z-10"></div>

                            <!-- Step 1 -->
                            <div class="flex gap-5 relative group">
                                <div class="flex-shrink-0 w-8 h-8 rounded-full bg-brand text-white flex items-center justify-center font-bold text-sm shadow-lg shadow-brand/30 ring-4 ring-white dark:ring-dark-card z-10">1</div>
                                <div class="pb-8">
                                    <h3 class="font-bold text-gray-900 dark:text-white text-base mb-1 group-hover:text-brand transition-colors">ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ ÏûÖÎ†•</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed">
                                        Î∏îÎ°úÍ∑∏, Îâ¥Ïä§Î†àÌÑ∞, ÎåÄÎ≥∏ Îì± Î≥ÄÌôòÌïòÍ≥† Ïã∂ÏùÄ<br>
                                        Í∏¥ Í∏ÄÏùÑ ÏûÖÎ†•Ï∞ΩÏóê Î∂ôÏó¨ÎÑ£ÏúºÏÑ∏Ïöî.
                                    </p>
                                </div>
                            </div>

                            <!-- Step 2 -->
                            <div class="flex gap-5 relative group">
                                <div class="flex-shrink-0 w-8 h-8 rounded-full bg-white dark:bg-dark-bg border-2 border-brand text-brand flex items-center justify-center font-bold text-sm shadow-sm ring-4 ring-white dark:ring-dark-card z-10">2</div>
                                <div class="pb-8">
                                    <h3 class="font-bold text-gray-900 dark:text-white text-base mb-1 group-hover:text-brand transition-colors">ÌîåÎû´Ìèº ÏÑ†ÌÉù</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed">
                                        Ìä∏ÏúÑÌÑ∞ Ïì∞Î†àÎìú, ÎßÅÌÅ¨ÎìúÏù∏, Ïù∏Ïä§ÌÉÄ Ï∫°ÏÖò Îì±<br>
                                        ÏõêÌïòÎäî ÌÉÄÍ≤ü Ìè¨Îß∑ÏùÑ ÏÑ†ÌÉùÌï©ÎãàÎã§.
                                    </p>
                                </div>
                            </div>

                            <!-- Step 3 -->
                            <div class="flex gap-5 relative group">
                                <div class="flex-shrink-0 w-8 h-8 rounded-full bg-white dark:bg-dark-bg border-2 border-gray-200 dark:border-gray-700 text-gray-400 flex items-center justify-center font-bold text-sm shadow-sm ring-4 ring-white dark:ring-dark-card z-10">3</div>
                                <div>
                                    <h3 class="font-bold text-gray-900 dark:text-white text-base mb-1 group-hover:text-brand transition-colors">AI ÏÉùÏÑ± & ÌôúÏö©</h3>
                                    <p class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed">
                                        ÏµúÏ†ÅÌôîÎêú ÏΩòÌÖêÏ∏†Í∞Ä ÏÉùÏÑ±ÎêòÎ©¥ Î≥µÏÇ¨ÌïòÍ±∞ÎÇò<br>
                                        Îã§Î•∏ Ïñ∏Ïñ¥Î°ú Î≤àÏó≠ÌïòÏó¨ ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî!
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="mb-6 px-4 py-3 bg-indigo-50/50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/30 rounded-xl flex items-start gap-3">
                            <i data-lucide="key" class="w-4 h-4 text-indigo-500 mt-0.5"></i>
                            <div class="flex-grow">
                                <p class="text-[11px] font-bold text-indigo-700 dark:text-indigo-300">üí° Ï†ÑÎ¨∏Í∞Ä ÌåÅ: ÎÇòÎßåÏùò API ÌÇ§ ÏÇ¨Ïö©ÌïòÍ∏∞</p>
                                <p class="text-[10px] text-indigo-600/70 dark:text-indigo-400/70 mt-0.5 leading-relaxed">
                                    ÏÑ§Ï†ïÏóêÏÑú Í∞úÏù∏ API ÌÇ§Î•º Îì±Î°ùÌïòÎ©¥ Îçî Îπ†Î•¥Í≥† ÏïàÏ†ïÏ†ÅÏù∏ ÏÉùÏÑ±Ïù¥ Í∞ÄÎä•Ìï©ÎãàÎã§.
                                </p>
                            </div>
                        </div>

                        <button id="close-onboarding" class="w-full bg-brand hover:bg-brand-dark text-white font-bold py-4 rounded-xl shadow-lg shadow-brand/20 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 group">
                            <span>ÏãúÏûëÌïòÍ∏∞</span>
                            <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </div>
                </div>
            </div>

        </main>


    </div>

    <!-- Toast Logic (Simple) -->
    <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium opacity-0 transition-opacity duration-300 pointer-events-none z-50">
        Copied to clipboard!
    </div>

    <!-- Scripts -->
    <script src="js/components.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/brand.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>
    <script>
        lucide.createIcons();
    </script>
    <!-- Result Editor Widget Modal -->
    <div id="result-widget" class="fixed inset-0 z-50 hidden overflow-hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out opacity-0" id="widget-backdrop"></div>
        
        <!-- Modal Content -->
        <div class="absolute inset-y-0 right-0 w-full max-w-6xl bg-white dark:bg-dark-bg shadow-2xl transition-transform transform translate-x-full duration-300 ease-in-out" id="widget-container">
            <div class="h-full flex flex-col">
                <!-- Header -->
                <div class="px-6 py-4 border-b border-gray-100 dark:border-dark-border flex items-center justify-between bg-white dark:bg-dark-card">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-brand/10 rounded-xl flex items-center justify-center">
                            <i data-lucide="sparkles" class="w-5 h-5 text-brand"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-bold text-gray-900 dark:text-white" id="widget-title">AI Content Editor</h2>
                            <p class="text-xs text-gray-500" id="widget-subtitle">Îã§ÏñëÌïú ÌîåÎû´ÌèºÏóê ÎßûÏ∂∞ ÏΩòÌÖêÏ∏†Î•º Îã§Îì¨Ïñ¥Î≥¥ÏÑ∏Ïöî.</p>
                        </div>
                    </div>
                    <button id="close-widget-btn" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-gray-500">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- Main Grid (Unified scroll on mobile, independent on desktop) -->
                <div class="flex-grow overflow-y-auto md:overflow-hidden flex flex-col md:flex-row">
                    <!-- Left Sidebar: Analytics -->
                    <div class="w-full md:w-80 border-r border-gray-100 dark:border-dark-border bg-white dark:bg-dark-card md:overflow-y-auto p-6 space-y-8 widget-sidebar">
                        
                        <!-- Viral Score Section -->
                        <div class="space-y-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="bar-chart-2" class="w-5 h-5 text-brand"></i>
                                <span class="text-sm font-bold text-gray-900 dark:text-white">AI ÏΩòÌÖêÏ∏† Î∂ÑÏÑù</span>
                                <span class="px-2 py-0.5 bg-brand/10 text-brand text-[10px] font-black rounded-md tracking-wider ml-auto">BETA</span>
                            </div>

                            <div class="bg-white dark:bg-dark-bg p-5 rounded-2xl border border-gray-100 dark:border-dark-border shadow-sm">
                                <div class="flex items-center gap-5">
                                    <div class="relative w-16 h-16 flex-shrink-0">
                                        <svg class="w-full h-full transform -rotate-90">
                                            <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="5" fill="transparent" class="text-gray-100 dark:text-gray-800"></circle>
                                            <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="5" fill="transparent" stroke-dasharray="175.9" stroke-dashoffset="175.9" class="text-brand transition-all duration-1000 ease-out" id="widget-score-circle"></circle>
                                        </svg>
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <span class="text-xl font-black text-gray-900 dark:text-white" id="widget-score-value">0</span>
                                        </div>
                                    </div>
                                    <div>
                                        <p class="text-[10px] font-bold text-gray-400 tracking-wider mb-0.5">Viral Score</p>
                                        <p class="text-base font-black text-brand transition-all" id="widget-score-text">Î∂ÑÏÑù Ï§ë...</p>
                                    </div>
                                </div>
                                
                                <div class="mt-4 pt-4 border-t border-gray-50 dark:border-gray-800">
                                    <p class="text-[12px] text-gray-500 dark:text-gray-400 leading-relaxed mb-4" id="widget-score-reason">
                                        ÏΩòÌÖêÏ∏† Î∂ÑÏÑù Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§.
                                    </p>
                                    <div id="widget-pillars" class="flex flex-wrap gap-2">
                                        <!-- Colorful Pills injected here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SEO Title Redesign -->
                        <div class="space-y-3">
                            <h3 class="text-[11px] font-black text-gray-400 uppercase tracking-widest pl-1">RECOMMENDED TITLE</h3>
                            <div class="p-4 bg-gray-50 dark:bg-dark-bg rounded-xl border border-gray-100 dark:border-dark-border text-sm font-bold text-gray-800 dark:text-gray-100 leading-snug shadow-sm flex items-start gap-3 relative group transition-colors hover:border-brand/30">
                                <div class="absolute left-0 top-0 bottom-0 w-1 bg-brand rounded-l-xl"></div>
                                <div class="flex-grow pt-0.5" id="widget-seo-title">-</div>
                                <div id="widget-edit-title-btn" class="shrink-0 p-1.5 bg-white dark:bg-dark-card rounded-lg text-gray-400 shadow-sm group-hover:text-brand transition-colors cursor-pointer">
                                    <i data-lucide="edit-3" class="w-3.5 h-3.5"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Keywords Redesign -->
                        <div class="space-y-3">
                            <div class="flex items-center justify-between pl-1">
                                <h3 class="text-[11px] font-black text-gray-400 uppercase tracking-widest">RECOMMENDED TAGS</h3>
                                <button id="widget-copy-keywords" class="text-[10px] font-bold text-brand hover:text-brand-dark flex items-center gap-1.5 transition-colors bg-brand/5 px-2 py-1 rounded-md hover:bg-brand/10">
                                    <i data-lucide="copy" class="w-3 h-3"></i> Copy All
                                </button>
                            </div>
                            <div id="widget-keywords" class="flex flex-wrap gap-2">
                                <!-- Keywords injected here -->
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Editor -->
                    <div class="flex-grow flex flex-col bg-white dark:bg-dark-bg md:overflow-hidden">
                        <!-- Platform Tabs Bar -->
                        <div id="widget-tabs-container" class="px-6 py-4 border-b border-gray-100 dark:border-dark-border bg-gray-50/20 dark:bg-dark-card/20 overflow-x-auto overflow-y-hidden min-h-[72px] flex items-center">
                            <div class="flex gap-3" id="widget-tabs">
                                <!-- Tabs injected here -->
                            </div>
                        </div>

                        <!-- Editor Area -->
                        <div class="flex-grow md:overflow-y-auto p-6">
                            <div class="max-w-3xl mx-auto space-y-6">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-sm font-bold text-gray-900 dark:text-white flex items-center gap-2">
                                        <i data-lucide="file-text" class="w-4 h-4 text-brand"></i>
                                        Generated Content
                                    </h3>
                                    <div class="flex items-center gap-2">
                                        <div class="flex items-center bg-gray-100 dark:bg-dark-card rounded-xl p-1 border border-gray-200 dark:border-dark-border mr-2 overflow-hidden shadow-sm">
                                            <button onclick="document.execCommand('bold', false, null)" class="p-2 hover:bg-white dark:hover:bg-dark-bg text-gray-500 hover:text-brand transition-colors rounded-lg" title="Bold (Ctrl+B)">
                                                <i data-lucide="bold" class="w-3.5 h-3.5"></i>
                                            </button>
                                            <button onclick="document.execCommand('underline', false, null)" class="p-2 hover:bg-white dark:hover:bg-dark-bg text-gray-500 hover:text-brand transition-colors rounded-lg" title="Underline (Ctrl+U)">
                                                <i data-lucide="underline" class="w-3.5 h-3.5"></i>
                                            </button>
                                            <div class="w-px h-4 bg-gray-200 dark:bg-gray-700 mx-1"></div>
                                            <button onclick="document.execCommand('foreColor', false, '#ef4444')" class="p-2 hover:bg-white dark:hover:bg-dark-bg text-red-500 hover:scale-110 transition-all rounded-lg" title="Red Text">
                                                <i data-lucide="palette" class="w-3.5 h-3.5"></i>
                                            </button>
                                            <button onclick="document.execCommand('foreColor', false, '#3b82f6')" class="p-2 hover:bg-white dark:hover:bg-dark-bg text-blue-500 hover:scale-110 transition-all rounded-lg" title="Blue Text">
                                                <i data-lucide="palette" class="w-3.5 h-3.5"></i>
                                            </button>
                                            <button onclick="document.execCommand('foreColor', false, 'inherit')" class="p-2 hover:bg-white dark:hover:bg-dark-bg text-gray-400 hover:text-gray-900 transition-all rounded-lg" title="Reset Color">
                                                <i data-lucide="eraser" class="w-3.5 h-3.5"></i>
                                            </button>
                                        </div>
                                        <button id="widget-copy-content" class="px-3 py-1.5 bg-brand text-white text-xs font-bold rounded-lg hover:bg-brand-dark transition-all flex items-center gap-2 shadow-sm">
                                            <i data-lucide="copy" class="w-3.5 h-3.5"></i> Copy Content
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="relative group">
                                    <div class="prose prose-sm dark:prose-invert max-w-none p-6 rounded-2xl bg-gray-50 dark:bg-dark-card border border-gray-100 dark:border-dark-border min-h-[400px] focus-within:ring-2 ring-brand/20 transition-all outline-none" id="widget-editor" contenteditable="true">
                                        <!-- Content injected here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="px-6 py-4 border-t border-gray-100 dark:border-dark-border bg-gray-50/50 dark:bg-dark-card flex items-center justify-between">
                    <p class="text-xs text-gray-400">Content generated by RepurposeAI. Always review before posting.</p>
                    <div class="flex gap-3">
                        <button id="widget-save-btn" class="px-5 py-2 text-sm font-bold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all">
                            Save Changes
                        </button>
                        <button id="widget-share-btn" class="px-5 py-2 bg-brand text-white text-sm font-bold rounded-xl hover:bg-brand-dark shadow-lg shadow-brand/20 transition-all flex items-center gap-2">
                             <i data-lucide="share-2" class="w-4 h-4"></i>
                             Post to Social
                        </button>
                    </div>
                </div>
            </div>

            <!-- Localized Widget Toast -->
            <div id="widget-toast" class="absolute bottom-20 left-1/2 -translate-x-1/2 bg-gray-900/90 backdrop-blur-md text-white px-5 py-2.5 rounded-2xl shadow-xl text-xs font-bold opacity-0 transition-all duration-300 pointer-events-none z-[60] flex items-center gap-2 border border-white/10">
                <i data-lucide="check-circle-2" class="w-3.5 h-3.5 text-green-400"></i>
                <span id="widget-toast-text">Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!</span>
            </div>
        </div>
    </div>
    <!-- Pillar Detail Modal -->
    <div id="pillar-detail-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center p-4 sm:p-6">
        <div id="pillar-detail-backdrop" class="absolute inset-0 bg-black/60 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>
        <div id="pillar-detail-container" class="relative w-full max-w-lg bg-white dark:bg-dark-card rounded-3xl shadow-2xl overflow-hidden transform scale-95 opacity-0 transition-all duration-300">
            <!-- Header -->
            <div class="px-6 py-5 border-b border-gray-100 dark:border-dark-border flex items-center justify-between" id="pillar-modal-header">
                <div class="flex items-center gap-3">
                    <div id="pillar-modal-icon" class="p-2.5 rounded-2xl bg-brand/10 text-brand">
                        <i data-lucide="zap"></i>
                    </div>
                    <div>
                        <h3 id="pillar-modal-title" class="text-lg font-black text-gray-900 dark:text-white">Pillar Analysis</h3>
                        <p id="pillar-modal-score" class="text-xs font-bold text-gray-400">Score: 0/40</p>
                    </div>
                </div>
                <button id="close-pillar-modal" class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            <!-- Body -->
            <div class="p-6">
                <div class="p-5 bg-gray-50 dark:bg-dark-bg rounded-2xl border border-gray-100 dark:border-dark-border">
                    <p id="pillar-modal-comment" class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed font-medium">
                        Î∂ÑÏÑù ÏΩîÎ©òÌä∏Î•º Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§.
                    </p>
                </div>
            </div>
            <!-- Footer -->
            <div class="px-6 py-5 bg-gray-50/50 dark:bg-dark-card/50 border-t border-gray-100 dark:border-dark-border flex justify-end">
                <button id="pillar-modal-close-btn" class="px-6 py-2.5 bg-brand text-white text-sm font-bold rounded-xl hover:bg-brand-dark transition-all shadow-lg shadow-brand/20">
                    ÌôïÏù∏
                </button>
            </div>
        </div>
    </div>

    <!-- Global App Modal -->
    <div id="app-modal" class="fixed inset-0 z-[150] flex items-center justify-center bg-black/60 backdrop-blur-sm hidden opacity-0 transition-opacity duration-300">
        <div class="bg-white dark:bg-dark-card border border-gray-200 dark:border-dark-border p-6 rounded-2xl shadow-2xl max-w-sm w-[90%] transform scale-95 transition-all duration-300" id="app-modal-content">
            <div class="flex items-start gap-4">
                <div id="modal-icon-container" class="w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 bg-brand/10 text-brand">
                    <i data-lucide="alert-circle" id="modal-icon" class="w-6 h-6"></i>
                </div>
                <div class="flex-grow">
                    <h3 id="modal-title" class="text-lg font-bold text-gray-900 dark:text-white mb-1">ÏïàÎÇ¥</h3>
                    <p id="modal-message" class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed"></p>
                </div>
            </div>
            <div id="modal-footer" class="flex gap-3 justify-end mt-8">
                <button id="modal-cancel-btn" class="flex-1 sm:flex-none px-6 py-2.5 rounded-xl border border-gray-200 dark:border-dark-border text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 text-sm font-medium transition-colors hidden">
                    Ï∑®ÏÜå
                </button>
                <button id="modal-confirm-btn" class="flex-1 sm:flex-none px-6 py-2.5 rounded-xl bg-brand text-white hover:bg-brand-dark text-sm font-medium shadow-lg shadow-brand/20 transition-all active:scale-95">
                    ÌôïÏù∏
                </button>
            </div>
        </div>
    </div>

</body>
</html>
